
<div *ngIf="getViewRole() == 'admin'">
    <button class="btn btn-primary btn-sm" style="margin:5px;" (click)="changerEtat('propose')">Proposer</button>
    <button class="btn btn-primary btn-sm" style="margin:5px;" (click)="changerEtat('refuse')">Refuser</button>
    <button class="btn btn-primary btn-sm" style="margin:5px;" (click)="changerEtat('valide')">Valider</button>
    
    <button class="btn btn-primary btn-sm" style="margin:5px;" (click)="changerEtat('reserve')">Réserver</button>
    
    <button class="btn btn-primary btn-sm" style="margin:5px;" (click)="changerEtat('affectEtudiant')">Etudiant affecté</button>
    <button class="btn btn-primary btn-sm" style="margin:5px;" (click)="changerEtat('affectTuteur')">Tuteur affecté</button>
    <button class="btn btn-primary btn-sm" style="margin:5px;" (click)="changerEtat('affectRapporteur')">Rapporteur affecté</button>
    
    <button class="btn btn-primary btn-sm" style="margin:5px;" (click)="changerEtat('termine')">terminer</button>
    
</div>



<!-- Première étape du processus de gestion des états d'un stage-->
<!-- On choisit de valider le stage ou de le refuser. -->
<!-- Un stage valide pourra être vu par tous le monde, alors qu'un stage proposé sera seulement vu par l'admin, le responsable stage -->
<div class="alert alert-warning" *ngIf="(getState() == 'propose') && (getViewRole() =='admin')">
    <p><strong>Validation du stage :</strong><br>
        Cliquez sur Valider pour valider le stage et pour qu'il soit visible par les étudiants.<br>
        Cliquez sur Supprimer pour refuser le stage et le supprimer de la base de données.
    </p>
        <button class="btn btn-danger btn-sm" style="margin:5px;" (click)="changerEtat('refuse')">Refuser</button>
        <button class="btn btn-primary btn-sm" style="margin:5px;" (click)="changerEtat('valide')">Valider</button>
</div>

<div class="alert alert-danger" *ngIf="getState() == 'refuse'">
    <p>
        <strong>Message :</strong> Le stage a été refusé.
    </p>
</div>

<div class="alert alert-success" *ngIf="getState() == 'valide'">
    <p><strong>Pour postuler à ce stage, veuillez contacter l'entreprise.</strong><br>
        Après l'accord de l'entreprise, veuillez signaler l'optention du stage au responsable de stage.</p>
        <button class="btn btn btn-sm btn-success btn-sm" >Contacter l'entreprise</button>
        <button class="btn btn btn-sm btn-outline-success btn-sm" style="margin:5px;">Contacter le responsable</button>
</div>

<!-- Deuxième étape -->
<!-- Apprès la validation, si l'ajouteur est un étudiant il est automatiquement reservé pour lui -->
<!-- Cependant, l'étudiant peut rendre le stage en non reservé si il souhaite le laisser pour un autre étudiant -->
<div class="alert alert-primary" *ngIf="getState() == 'reserve'">
    <p><strong>Rendre ce stage disponible pour tous les étudiants</strong>
        <button class="btn btn btn-sm btn-outline-danger btn-sm"  (click)="changerEtat('valide')">Supprimer la réservation</button>
    </p>
</div>

<!-- Troisième étape -->
<!-- Le stage peut être affecté à un étudiant-->
<div class="alert alert-primary" *ngIf="getState() == ('valide' || 'reserve') && (getViewRole() =='admin')">
    <p><strong>Selectionner un étudiant pour ce stage :</strong><br>
    </p>
    <form>
        <div class="form-group-row">
            <select id="inputEtudiantAffectation" class="form-control">
                <option value="" disabled selected>Selectionner un étudiant</option>
                <option value="1">Antoine</option>
                <option value="2">El Mokthar</option>
                <option value="3">Issakou</option>
            </select>
            <button class="btn btn-primary btn-sm" (click)="changerEtat('affectEtudiant')">Affecté l'étudiant</button>
        </div>
    </form>
</div>

<!-- Quatrième étape -->
<!-- Un enseignant peut choisir de devenir le tuteur du stage -->
<div class="alert alert-primary" *ngIf="getState() == 'affectEtudiant' && (getViewRole() =='admin')">
    <p><strong>Devenir le tuteur de ce stage</strong></p>
        <button class="btn btn-sm btn-outline-primary" style="margin:5px;" (click)="changerEtat('affectTuteur')">Devenir Tuteur</button>
</div>
<!-- Ou bien l'administrateur ou le responsable de stage peut affecté un tuteur -->
<div class="alert alert-primary" *ngIf="getState() == 'affectEtudiant' && (getViewRole() =='admin')">
    <p><strong>Affecter un tuteur</strong><br>
    </p>
    <form>
        <div class="form-group-row">
            <select id="inputEtudiantAffectation" class="form-control">
                <option value="" disabled selected>Selectionner un tuteur</option>
                <option value="1">Antoine</option>
                <option value="2">El Mokthar</option>
                <option value="3">Issakou</option>
            </select>
            <button class="btn btn-primary btn-sm" (click)="changerEtat('affectTuteur')">Affecter le tuteur</button>
        </div>
    </form>
</div>

<!-- Cinquième étape -->
<!-- un enseignant peut choisir de devenir rapporteur du stage -->
<div class="alert alert-primary" *ngIf="getState() == 'affectTuteur' && (getViewRole() == ('admin'))">
    <p><strong>Devenir rapporteur de ce stage</strong></p>
        <button class="btn btn-sm btn-outline-primary" (click)="changerEtat('affectTuteur')">Devenir Rapporteur</button>
</div>
<!-- ou bien on peut afffecté un rapporteur au stage-->
<div class="alert alert-primary" *ngIf="getState() == 'affectTuteur' && (getViewRole() == ('admin'))">
    <p><strong>Affecter un rapporteur</strong><br>
    </p>
    <form>
        <div class="form-group-row">
            <select id="inputEtudiantAffectation" class="form-control">
                <option value="" disabled selected>Selectionner un rapporteur</option>
                <option value="1">Antoine</option>
                <option value="2">El Mokthar</option>
                <option value="3">Issakou</option>
            </select>
            <button class="btn btn-primary btn-sm" (click)="changerEtat('affectTuteur')">Affecter le rapporteur</button>
        </div>
    </form>
</div>

<!-- Dernière étape -->
<!-- Le stage est terminé une fois que la soutenance est passé (c'est le serveur qui s'occupe de faire cette vérification)-->
<div class="alert alert-secondary" *ngIf="getState() == 'termine'">
    <p><strong>Stage terminé :</strong> La fiche du stage a été placé dans les archives.</p>
</div>