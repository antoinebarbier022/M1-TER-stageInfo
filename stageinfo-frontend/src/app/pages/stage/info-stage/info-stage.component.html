<app-navigation [title]="stage.titre" xmlns="http://www.w3.org/1999/html"></app-navigation>

<div class="all-card">
    <div id="status-stage">
        <ul class="nav-progress">
            <li [ngClass]="'fieldset-active progress-first'">
                <i class=""></i>
                Stage proposé
            </li>
            <li [ngClass]="'fieldset-active progress-second' ">
                <i class=""></i>
                Stage validé

            </li>
            <li [ngClass]="'fieldset-active progress-second' ">
                <i class=""></i>

                Affecté à un étudiant
            </li>
            <li>
                <i class=""></i>
                Associé à un tuteur
            </li>

            <li >
                <i class=""></i>
                Associé à un rapporteur
            </li>

            <li >
                <i class=""></i>
                Stage Terminé
            </li>
        </ul>

        <div class="alert alert-primary">
            <p><strong>Validation du stage :</strong><br>
                Cliquez sur Valider pour valider le stage et pour qu'il soit visible par les étudiants.<br>
                Cliquez sur Supprimer pour refuser le stage et le supprimer de la base de données.
            </p>
                <button class="btn btn-danger btn-sm" style="margin:5px;">Supprimer</button>
                <button class="btn btn-primary btn-sm" style="margin:5px;">Valider</button>
        </div>
<!-- Autres messages de changement d'état du stage -->
<!--
        <div class="alert alert-primary">
            <p>
                <strong>Validation de l'affectation Tuteur/Stage: </strong>
                <input type="text" readonly class="form-control" value="Antoine Barbier">
            </p>
                <button class="btn btn-danger btn-sm" style="margin:5px;">Refuser</button>
                <button class="btn btn-primary btn-sm" style="margin:5px;">accepter</button>
        </div>

        <div class="alert alert-primary">
            <p>
                <strong>Validation de l'affectation Etudiant/Stage: </strong>
                <input type="text" readonly class="form-control" value="Antoine Barbier">
            </p>
                <button class="btn btn-danger btn-sm" style="margin:5px;">Refuser</button>
                <button class="btn btn-primary btn-sm" style="margin:5px;">accepter</button>
        </div>

        <div class="alert alert-primary">
            <p>
                <strong>Validation de l'affectation Rapporteur/Stage: </strong>
                <input type="text" readonly class="form-control" value="Antoine Barbier">
            </p>
                <button class="btn btn-danger btn-sm" style="margin:5px;">Refuser</button>
                <button class="btn btn-primary btn-sm" style="margin:5px;">accepter</button>
        </div>
        <div class="alert alert-primary">
            <p><strong>Demande d'association Etudiant/Stage :</strong><br>
            </p>
            <form>
                <div class="form-group-row">
                    <label for="inputEtudiantAffectation">Étudiant : </label>
                    <select id="inputEtudiantAffectation" class="form-control">
                        <option value="" disabled selected>Selectionner un Étudiant</option>
                        <option value="1">Antoine</option>
                        <option value="2">El Mokthar</option>
                        <option value="3">Issakou</option>
                    </select>
                    <button class="btn btn-primary btn-sm" style="margin:5px;">Envoyer la demande</button>
                </div>
            </form>
        </div>

        <div class="alert alert-primary">
            <p><strong>Demande d'association Tuteur/Stage :</strong><br>
            </p>
            <form>
                <div class="form-group-row">
                    <label for="inputEtudiantAffectation">Tuteur : </label>
                    <select id="inputEtudiantAffectation" class="form-control">
                        <option value="" disabled selected>Selectionner un tuteur</option>
                        <option value="1">Antoine</option>
                        <option value="2">El Mokthar</option>
                        <option value="3">Issakou</option>
                    </select>
                    <button class="btn btn-primary btn-sm" style="margin:5px;">Envoyer la demande</button>
                </div>
            </form>
        </div>

        <div class="alert alert-primary">
            <p><strong>Demande d'association Rapporteur/Stage :</strong><br>
            </p>
            <form>
                <div class="form-group-row">
                    <label for="inputEtudiantAffectation">Rapporteur : </label>
                    <select id="inputEtudiantAffectation" class="form-control">
                        <option value="" disabled selected>Selectionner un rapporteur</option>
                        <option value="1">Antoine</option>
                        <option value="2">El Mokthar</option>
                        <option value="3">Issakou</option>
                    </select>
                    <button class="btn btn-primary btn-sm" style="margin:5px;">Envoyer la demande</button>
                </div>
            </form>
        </div>

        <div class="alert alert-danger">
            <p>
                <strong>Message :</strong> Affectation refusé pour l'étudiant Antoine Barbier
            </p>
        </div>
-->
    </div>

    <!-- Informations du stage -->
    <app-card id="information-stage" title="Informations">
        <p>Titre : {{ stage?.titre }}</p>
            <p>Parcours : {{ stage?.parcours?.acronyme }}</p>
            <p>Durée : {{ stage?.duree }} mois</p>
            <p>Date de saisi du stage : {{ stage?.datePropose | date:'fullDate':'+0200':'fr' }}</p>
            <p>Date de validation du stage : {{ stage?.dateValide | date:'fullDate':'+0200':'fr' }}</p>
            <p>Date de début du stage : {{ stage?.datedebut | date:'fullDate':'+0200':'fr' }}</p>
    </app-card>

    <!-- Avantages du stage -->
    <app-card id="avantages-stage" title="Avantages">
        <p>Salaire : {{ stage?.salaire }}</p>
        <p>Avantages : {{ stage?.avantages }}</p>
    </app-card>

    <!-- Conditions du stage -->
    <app-card id="conditions-stage" title="Conditions">
        <p>Niveau requis : {{ stage?.niveauRequis }}</p>
        <p>Conditions : {{ stage?.conditions}}</p>
        <br>
        <p>Ajouteur : {{ stage?.ajouteur?.nom + ' ' + stage?.ajouteur?.prenom }}</p>
        <p>tuteurUniv : {{ stage?.tuteurUniv?.nom + ' ' + stage?.tuteurUniv?.prenom }}</p>
        <p>rapporteur : {{ stage?.rapporteur?.nom + ' ' + stage?.rapporteur?.prenom }}</p>
        <p>etudiant : {{ stage?.etudiant?.nom + ' ' + stage?.etudiant?.prenom }}</p>
    </app-card>

    <!-- Description du stage -->
    <app-card id="description-stage" title="Description">
        <p>{{ stage?.description }}</p>
    </app-card>

    <!-- Informations sur l'entreprise du stage -->
    <app-card id="entreprise-stage" title="Entreprise">
        <p>Nom : <a [routerLink]="['/liste-entreprises', stage?.entreprise?._id]">{{ stage?.entreprise?.nom }}</a> </p>
        <p>Adresse : {{ stage?.entreprise?.voie }}</p>
        <p>Site internet : <a [href]="stage?.entreprise?.siteweb" target="_blank">{{ stage?.entreprise?.siteweb }}</a> </p>
        <br>
        <p>Tuteur dans l'entreprise: {{ stage?.entreprise }}</p>
        <p>Email :</p>
        <p>tel : </p>
        <p>fax :</p>
    </app-card>
</div>


<hr>
<h2>Pièces Jointes</h2>
<div id="pieces-jointes-stage">

    <div class="card commentaire">
        <div class="card-body">
            <p *ngIf="stage?.fichier"><a href="{{ stage?.fichier}}" target="_blank">Rapport_de_stage2.pdf</a></p>
        </div>
    </div>
</div>
<hr>

<h2>Commentaires sur le stage</h2>

<div id="commentaires-stage">
    <!-- les commentaires du stages-->
    <app-card-item-comment *ngFor="let comment of comments"
            [idUser]="comment.idUser"
            [author]="comment.author"
            [date]="comment.date">
        <p>{{ comment.content }}</p>
    </app-card-item-comment>

    <!-- Ajouter un commentaire sur le stage -->
    <div class="add-comment">
        <form>
            <div class="form-group">
                <label for="inputComment">Ajouter un commentaire : </label>
                <textarea   id="inputComment"
                            class="form-control"
                            rows="3"></textarea>
            </div>
            <button type="submit" class="btn btn-secondary btn-sm">Envoyer</button>
        </form>
    </div>

</div>
